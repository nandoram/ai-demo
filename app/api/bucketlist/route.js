import { NextResponse } from 'next/server'
import { Configuration, OpenAIApi } from "openai";
import { questions } from '@/app/demos/bucketlist/questionsData';
export async function GET(request, response) {
  const { searchParams } = new URL(request.url);
  const answers = JSON.parse(searchParams.get('answers'));
  console.log(answers);
  let questionArray = [];
  questions.map((data, i) => { 
    questionArray.push(data.content)
  });
  const configuration = new Configuration({
      organization: "org-dOailguhnw7ZSQFjGcgMRZec",
      apiKey: process.env.OPENAI_KEY,
  });
  const openai = new OpenAIApi(configuration);
  const completion = await openai.createChatCompletion({
    model: "gpt-3.5-turbo",
    messages: [{"role": "system", "content": "You will generate a long bucketlist based on answers given from a personality quiz."}, {role: "user", content: `Generate a personalized and specific bucketlist based on the following questions and answers: Q ${questionArray[0]} A. ${answers.adventure}, Q ${questionArray[1]} A. ${answers.social}, Q ${questionArray[2]} A. ${answers.nature}, Q ${questionArray[3]} A. ${answers.creativity}, Q ${questionArray[4]} A. ${answers.cultural}, Q ${questionArray[5]} A. ${answers.learning}, Q ${questionArray[6]} A. ${answers.physical}, Q ${questionArray[7]} A. ${answers.food}, Q ${questionArray[8]} A. ${answers.historical}, Q ${questionArray[9]} A. ${answers.family}`}],
  });
 let generatedBucketList = completion.data.choices[0].message.content
// let generatedBucketList = 'assdasdasd  Bucketlist: 1. Skydiving - Embrace your adventurous side and try the exhilarating experience of skydiving. 2. Join a local sports team - Engage in physical activities and meet new people by joining a sports team in your community. 3. Take a solo camping trip - Disconnect from technology and immerse yourself in nature with a peaceful solo camping trip. 4. Start a creative hobby - Explore your creative side by taking up a new hobby like painting, writing, or crafting. 5. Attend a cultural festival - Immerse yourself in different cultures by attending a cultural festival and experiencing diverse traditions. 6. Learn a new language - Expand your horizons by learning a new language and opening doors to different countries and cultures. 7. Take cooking classes - Explore culinary experiences by enrolling in cooking classes and learning new recipes and techniques. 8. Visit the Taj Mahal - Indulge your interest in historical landmarks and cultural sites by visiting the iconic Taj Mahal in India. 9. Plan a family reunion - Prioritize family by organizing a memorable reunion where everyone can reconnect and create lasting memories. 10. Try rock climbing - Challenge yourself both mentally and physically by attempting the thrilling activity of rock climbing. 11. Explore a national park - Spend time in nature by visiting a national park and enjoying breathtaking landscapes and wildlife. 12. Write a book - Use your creative skills to embark on the journey of writing a book, sharing your ideas and stories with the world. 13. Travel to Japan - Satiate your curiosity about different cultures by visiting Japan and experiencing its unique traditions and cuisine. 14. Learn to play a musical instrument - Expand your skillset by taking music lessons and learning to play an instrument of your choice. 15. Volunteer abroad - Combine personal growth with cultural immersion by volunteering abroad and making a positive impact on communities. 16. Take up photography - Capture beautiful moments and scenes by pursuing photography as a hobby or passion. 17. Visit the Great Wall of China - Explore another iconic cultural site, the Great Wall of China, and learn about its historical significance. 18. Go on a yoga retreat - Prioritize your physical and mental well-being by attending a yoga retreat and indulging in relaxation and self-care. 19. Try new cuisines - Expand your palate by regularly experiencing new foods and trying different cuisines from around the world. 20. Visit the Pyramids of Giza - Satiate your interest in historical landmarks by witnessing the ancient Egyptian pyramids in person. 21. Take a dance class - Channel your creativity and engage in physical activity by joining a dance class to learn a new style or improve your skills. 22. Explore underwater - Discover the beauty of marine life by trying scuba diving or snorkeling in an exotic location. 23. Attend a meditation retreat - Focus on personal development and inner peace by participating in a meditation retreat. 24. Visit the Louvre Museum - Embrace your appreciation for art and history by exploring the world-renowned Louvre Museum in Paris. 25. Create a family recipe book - Gather and document cherished family recipes to create a personalized recipe book to treasure for generations. 26. Go bungee jumping - Feed your adrenaline addiction by experiencing the thrill of bungee jumping from a high platform. 27. Travel solo - Challenge yourself to step outside your comfort zone by embarking on a solo travel adventure and discovering new parts of the world. 28. Participate in a 10k run - Set a fitness goal and work towards completing a 10k run, enjoying the physical and mental benefits along the way. 29. Attend a poetry recital or open mic night - Embrace your artistic side by attending poetry recitals or open mic nights to showcase your own work or listen to others. 30. Explore the Amazon rainforest - Engage with nature by exploring the biodiversity and beauty of the Amazon rainforest on an eco-tour. 31. Take a wine tasting tour - Indulge in culinary experiences by visiting different wineries and experiencing wine tasting tours in renowned wine regions. 32. Visit the Colosseum in Rome - Combine your love for historical landmarks and cultural sites by visiting the Colosseum in Rome, Italy. 33. Start a book club - Foster a love for reading and socializing by starting a book club to discuss literature with friends and like-minded individuals. 34. Learn to surf - Embrace the waves and learn how to surf, enjoying the thrill of riding a board and connecting with the ocean. 35. Go on a road trip - Plan a memorable road trip with friends or family, exploring new destinations and creating unforgettable memories along the way. 36. Attend a music festival - Immerse yourself in the joy of live music by attending a music festival and experiencing a variety of artists and genres. 37. Take up gardening - Connect with nature and embrace a new hobby by starting your own garden and nurturing plants. 38. Visit the ancient city of Petra - Satiate your curiosity about historical sites by visiting the ancient city of Petra in Jordan, renowned for its rock-cut architecture. 39. Start a blog - Share your passions and experiences with the world by starting a blog on topics that interest you. 40. Volunteer at a wildlife sanctuary - Combine your love for nature and animals by volunteering at a wildlife sanctuary and contributing to conservation efforts.';
generatedBucketList =generatedBucketList.split(/[0-9]+\./)
console.log(generatedBucketList)
  return NextResponse.json({ generatedBucketList })
}